<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tutorial 1.3: Mutation Lollipop Plot</title>
  <link rel="stylesheet" href="./src/styles.css">
</head>
<body>
  <header>
    <h1>Mutation Lollipop Plot</h1>
    <p>The signature visualization for cancer genomics</p>
  </header>

  <nav class="tabs">
    <button class="tab active" data-section="basics">Basics</button>
    <button class="tab" data-section="domains">Protein Domains</button>
    <button class="tab" data-section="mutations">Mutations</button>
    <button class="tab" data-section="interactive">Interactive</button>
    <button class="tab" data-section="complete">Complete Plot</button>
  </nav>

  <main>
    <!-- Section 1: Basics -->
    <section id="basics" class="section active">
      <h2>1. Lollipop Plot Anatomy</h2>
      <p>Understanding the components of a mutation lollipop plot.</p>
      
      <div class="info-panel">
        <h3>What is a Lollipop Plot?</h3>
        <p>A lollipop plot visualizes mutations along a protein sequence. Each "lollipop" represents a mutation at a specific amino acid position. The height typically indicates frequency, and colors show mutation types.</p>
        <ul>
          <li><strong>Protein backbone</strong> - Horizontal bar representing the full protein</li>
          <li><strong>Domains</strong> - Colored regions showing functional domains</li>
          <li><strong>Lollipop stem</strong> - Vertical line from backbone to mutation head</li>
          <li><strong>Lollipop head</strong> - Circle sized by frequency, colored by type</li>
        </ul>
      </div>

      <div class="demo-container full-width">
        <div class="demo-panel">
          <h3>Basic Lollipop Structure</h3>
          <div id="basic-lollipop-demo"></div>
        </div>
      </div>
      
      <div class="demo-container">
        <div class="code-panel full">
          <h3>Code</h3>
          <pre><code id="basic-code"></code></pre>
        </div>
      </div>
    </section>

    <!-- Section 2: Protein Domains -->
    <section id="domains" class="section">
      <h2>2. Protein Domain Visualization</h2>
      <p>Rendering functional domains along the protein backbone.</p>
      
      <div class="demo-container full-width">
        <div class="demo-panel">
          <h3>TP53 Protein Domains</h3>
          <div id="domains-demo"></div>
        </div>
      </div>

      <div class="demo-container">
        <div class="demo-panel">
          <h3>Domain Legend</h3>
          <div id="domain-legend"></div>
        </div>
        <div class="code-panel">
          <h3>Code</h3>
          <pre><code id="domains-code"></code></pre>
        </div>
      </div>
    </section>

    <!-- Section 3: Mutations -->
    <section id="mutations" class="section">
      <h2>3. Mutation Rendering</h2>
      <p>Displaying mutations with proper sizing, coloring, and clustering.</p>
      
      <div class="demo-container full-width">
        <div class="demo-panel">
          <h3>Mutation Types & Sizing</h3>
          <div id="mutations-demo"></div>
        </div>
      </div>

      <div class="mutation-legend">
        <h3>Mutation Type Legend</h3>
        <div class="legend-items" id="mutation-legend"></div>
      </div>

      <div class="demo-container">
        <div class="code-panel full">
          <h3>Code</h3>
          <pre><code id="mutations-code"></code></pre>
        </div>
      </div>
    </section>

    <!-- Section 4: Interactive -->
    <section id="interactive" class="section">
      <h2>4. Interactive Features</h2>
      <p>Adding tooltips, hover effects, filtering, and zoom.</p>
      
      <div class="controls-panel">
        <h3>Filters</h3>
        <div class="filter-group">
          <label>Mutation Type:</label>
          <select id="type-filter">
            <option value="all">All Types</option>
            <option value="Missense">Missense</option>
            <option value="Nonsense">Nonsense</option>
            <option value="Frameshift">Frameshift</option>
            <option value="Splice">Splice</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Min Count:</label>
          <input type="range" id="count-filter" min="1" max="500" value="1">
          <span id="count-value">1</span>
        </div>
        <div class="filter-group">
          <label>Position Range:</label>
          <input type="number" id="pos-start" value="1" min="1" max="393" style="width:60px">
          <span>to</span>
          <input type="number" id="pos-end" value="393" min="1" max="393" style="width:60px">
          <button id="apply-range">Apply</button>
        </div>
      </div>

      <div class="demo-container full-width">
        <div class="demo-panel">
          <h3>Interactive Lollipop Plot</h3>
          <div id="interactive-demo"></div>
          <div id="lollipop-tooltip" class="tooltip"></div>
        </div>
      </div>

      <div class="demo-container">
        <div class="code-panel full">
          <h3>Code</h3>
          <pre><code id="interactive-code"></code></pre>
        </div>
      </div>
    </section>

    <!-- Section 5: Complete Plot -->
    <section id="complete" class="section">
      <h2>5. Complete Lollipop Plot</h2>
      <p>Production-ready visualization with all features.</p>
      
      <div class="gene-selector">
        <label>Select Gene:</label>
        <select id="gene-select">
          <option value="TP53">TP53</option>
          <option value="KRAS">KRAS</option>
          <option value="EGFR">EGFR</option>
        </select>
        <button id="export-svg">Export SVG</button>
        <button id="export-png">Export PNG</button>
      </div>

      <div class="demo-container full-width">
        <div class="demo-panel">
          <div id="complete-demo"></div>
          <div id="complete-tooltip" class="tooltip"></div>
        </div>
      </div>

      <div class="stats-panel" id="stats-panel">
        <h3>Statistics</h3>
        <div class="stats-grid">
          <div class="stat"><span class="stat-value" id="total-mutations">-</span><span class="stat-label">Total Mutations</span></div>
          <div class="stat"><span class="stat-value" id="unique-positions">-</span><span class="stat-label">Unique Positions</span></div>
          <div class="stat"><span class="stat-value" id="hotspot-count">-</span><span class="stat-label">Hotspots (&gt;100)</span></div>
          <div class="stat"><span class="stat-value" id="top-mutation">-</span><span class="stat-label">Top Mutation</span></div>
        </div>
      </div>
    </section>
  </main>

  <script type="module" src="./src/main.js"></script>
</body>
</html>
